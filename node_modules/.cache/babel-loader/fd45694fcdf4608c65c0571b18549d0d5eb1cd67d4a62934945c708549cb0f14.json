{"ast":null,"code":"export default {\n  name: 'Profile',\n  data: () => ({\n    valid: true,\n    loading: false,\n    error: null,\n    success: null,\n    profile: {\n      name: '',\n      title: '',\n      phone: '',\n      whatsapp: '',\n      email: '',\n      address: ''\n    },\n    nameRules: [v => !!v || '姓名不能为空'],\n    emailRules: [v => !!v || '邮箱不能为空', v => /.+@.+\\..+/.test(v) || '请输入有效的邮箱地址']\n  }),\n  created() {\n    // 检查用户是否已登录\n    const userData = localStorage.getItem('user');\n    if (!userData) {\n      this.$router.push('/login');\n      return;\n    }\n\n    // 加载用户资料\n    const user = JSON.parse(userData);\n    this.profile = {\n      name: user.name || '',\n      title: user.title || '',\n      phone: user.phone || '',\n      whatsapp: user.whatsapp || '',\n      email: user.email || '',\n      address: user.address || ''\n    };\n  },\n  methods: {\n    async saveProfile() {\n      if (!this.$refs.form.validate()) return;\n      this.loading = true;\n      this.error = null;\n      this.success = null;\n      try {\n        // 模拟API调用\n        await new Promise(resolve => setTimeout(resolve, 1000));\n\n        // 获取当前用户数据\n        const userData = JSON.parse(localStorage.getItem('user'));\n\n        // 更新用户资料\n        const updatedUser = {\n          ...userData,\n          ...this.profile\n        };\n\n        // 保存到本地存储\n        localStorage.setItem('user', JSON.stringify(updatedUser));\n\n        // 触发全局事件，通知其他组件用户资料已更新\n        this.$root.$emit('profile-updated', updatedUser);\n        this.success = 'Profile updated successfully';\n      } catch (error) {\n        console.error('Failed to save profile:', error);\n        this.error = 'Failed to save profile, please try again later';\n      } finally {\n        this.loading = false;\n      }\n    }\n  }\n};","map":{"version":3,"names":["name","data","valid","loading","error","success","profile","title","phone","whatsapp","email","address","nameRules","v","emailRules","test","created","userData","localStorage","getItem","$router","push","user","JSON","parse","methods","saveProfile","$refs","form","validate","Promise","resolve","setTimeout","updatedUser","setItem","stringify","$root","$emit","console"],"sources":["src/views/Profile.vue"],"sourcesContent":["<template>\n  <div>\n    <v-parallax\n      :src=\"require('@/assets/background.jpg')\"\n      height=\"300\"\n      class=\"page-header\"\n    >\n      <div class=\"overlay\"></div>\n      <v-container class=\"fill-height\">\n        <v-row align=\"center\" justify=\"center\">\n          <v-col cols=\"12\" md=\"8\" class=\"text-center\">\n            <h1 class=\"text-h2 font-weight-bold white--text mb-4 page-title\">Profile</h1>\n            <p class=\"text-h6 white--text subtitle-text\">Update your contact information</p>\n          </v-col>\n        </v-row>\n      </v-container>\n    </v-parallax>\n\n    <v-container class=\"profile-container mt-n10\">\n      <v-row justify=\"center\">\n        <v-col cols=\"12\" md=\"10\">\n          <v-card class=\"profile-card\" elevation=\"10\">\n            <v-card-title class=\"headline primary white--text\">\n              Profile Settings\n            </v-card-title>\n            \n            <v-card-text class=\"pa-6\">\n              <v-form ref=\"form\" v-model=\"valid\" lazy-validation>\n                <v-row>\n                  <v-col cols=\"12\" md=\"6\">\n                    <v-text-field\n                      v-model=\"profile.name\"\n                      label=\"Name\"\n                      :rules=\"nameRules\"\n                      outlined\n                      required\n                    ></v-text-field>\n                  </v-col>\n                  \n                  <v-col cols=\"12\" md=\"6\">\n                    <v-text-field\n                      v-model=\"profile.title\"\n                      label=\"Job Title\"\n                      outlined\n                      required\n                    ></v-text-field>\n                  </v-col>\n                </v-row>\n                \n                <v-row>\n                  <v-col cols=\"12\" md=\"6\">\n                    <v-text-field\n                      v-model=\"profile.phone\"\n                      label=\"Phone\"\n                      outlined\n                      required\n                    ></v-text-field>\n                  </v-col>\n                  \n                  <v-col cols=\"12\" md=\"6\">\n                    <v-text-field\n                      v-model=\"profile.whatsapp\"\n                      label=\"WhatsApp\"\n                      outlined\n                    ></v-text-field>\n                  </v-col>\n                </v-row>\n                \n                <v-row>\n                  <v-col cols=\"12\" md=\"6\">\n                    <v-text-field\n                      v-model=\"profile.email\"\n                      label=\"Email\"\n                      :rules=\"emailRules\"\n                      outlined\n                      required\n                    ></v-text-field>\n                  </v-col>\n                  \n                  <v-col cols=\"12\" md=\"6\">\n                    <v-text-field\n                      v-model=\"profile.address\"\n                      label=\"Address\"\n                      outlined\n                    ></v-text-field>\n                  </v-col>\n                </v-row>\n                \n                <v-alert\n                  v-if=\"error\"\n                  type=\"error\"\n                  dismissible\n                  class=\"mt-4\"\n                >\n                  {{ error }}\n                </v-alert>\n                \n                <v-alert\n                  v-if=\"success\"\n                  type=\"success\"\n                  dismissible\n                  class=\"mt-4\"\n                >\n                  {{ success }}\n                </v-alert>\n                \n                <v-btn\n                  color=\"primary\"\n                  large\n                  class=\"mt-6\"\n                  :loading=\"loading\"\n                  :disabled=\"!valid\"\n                  @click=\"saveProfile\"\n                >\n                  Save Profile\n                </v-btn>\n              </v-form>\n            </v-card-text>\n          </v-card>\n        </v-col>\n      </v-row>\n    </v-container>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'Profile',\n  data: () => ({\n    valid: true,\n    loading: false,\n    error: null,\n    success: null,\n    profile: {\n      name: '',\n      title: '',\n      phone: '',\n      whatsapp: '',\n      email: '',\n      address: ''\n    },\n    nameRules: [\n      v => !!v || '姓名不能为空'\n    ],\n    emailRules: [\n      v => !!v || '邮箱不能为空',\n      v => /.+@.+\\..+/.test(v) || '请输入有效的邮箱地址'\n    ]\n  }),\n  created() {\n    // 检查用户是否已登录\n    const userData = localStorage.getItem('user')\n    if (!userData) {\n      this.$router.push('/login')\n      return\n    }\n    \n    // 加载用户资料\n    const user = JSON.parse(userData)\n    this.profile = {\n      name: user.name || '',\n      title: user.title || '',\n      phone: user.phone || '',\n      whatsapp: user.whatsapp || '',\n      email: user.email || '',\n      address: user.address || ''\n    }\n  },\n  methods: {\n    async saveProfile() {\n      if (!this.$refs.form.validate()) return\n      \n      this.loading = true\n      this.error = null\n      this.success = null\n      \n      try {\n        // 模拟API调用\n        await new Promise(resolve => setTimeout(resolve, 1000))\n        \n        // 获取当前用户数据\n        const userData = JSON.parse(localStorage.getItem('user'))\n        \n        // 更新用户资料\n        const updatedUser = {\n          ...userData,\n          ...this.profile\n        }\n        \n        // 保存到本地存储\n        localStorage.setItem('user', JSON.stringify(updatedUser))\n        \n        // 触发全局事件，通知其他组件用户资料已更新\n        this.$root.$emit('profile-updated', updatedUser)\n        \n        this.success = 'Profile updated successfully'\n      } catch (error) {\n        console.error('Failed to save profile:', error)\n        this.error = 'Failed to save profile, please try again later'\n      } finally {\n        this.loading = false\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n.page-header {\n  position: relative;\n}\n\n.overlay {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.7));\n}\n\n.profile-container {\n  position: relative;\n}\n\n.profile-card {\n  border-radius: 16px;\n  overflow: hidden;\n}\n\n@media (max-width: 960px) {\n  .profile-container {\n    margin-top: -60px;\n  }\n}\n\n.page-title {\n  text-shadow: 2px 2px 4px rgba(0,0,0,0.5);\n  letter-spacing: 1px;\n  font-size: 3.5rem !important;\n  position: relative;\n  display: inline-block;\n}\n\n.page-title::after {\n  content: '';\n  position: absolute;\n  bottom: -10px;\n  left: 50%;\n  transform: translateX(-50%);\n  width: 80px;\n  height: 4px;\n  background: var(--v-accent-base);\n  border-radius: 2px;\n}\n\n.subtitle-text {\n  text-shadow: 1px 1px 3px rgba(0,0,0,0.5);\n  letter-spacing: 0.5px;\n  max-width: 600px;\n  margin: 0 auto;\n}\n\n.overlay {\n  background: linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.6)) !important;\n}\n</style> "],"mappings":"AA8HA;EACAA,IAAA;EACAC,IAAA,EAAAA,CAAA;IACAC,KAAA;IACAC,OAAA;IACAC,KAAA;IACAC,OAAA;IACAC,OAAA;MACAN,IAAA;MACAO,KAAA;MACAC,KAAA;MACAC,QAAA;MACAC,KAAA;MACAC,OAAA;IACA;IACAC,SAAA,GACAC,CAAA,MAAAA,CAAA,aACA;IACAC,UAAA,GACAD,CAAA,MAAAA,CAAA,cACAA,CAAA,gBAAAE,IAAA,CAAAF,CAAA;EAEA;EACAG,QAAA;IACA;IACA,MAAAC,QAAA,GAAAC,YAAA,CAAAC,OAAA;IACA,KAAAF,QAAA;MACA,KAAAG,OAAA,CAAAC,IAAA;MACA;IACA;;IAEA;IACA,MAAAC,IAAA,GAAAC,IAAA,CAAAC,KAAA,CAAAP,QAAA;IACA,KAAAX,OAAA;MACAN,IAAA,EAAAsB,IAAA,CAAAtB,IAAA;MACAO,KAAA,EAAAe,IAAA,CAAAf,KAAA;MACAC,KAAA,EAAAc,IAAA,CAAAd,KAAA;MACAC,QAAA,EAAAa,IAAA,CAAAb,QAAA;MACAC,KAAA,EAAAY,IAAA,CAAAZ,KAAA;MACAC,OAAA,EAAAW,IAAA,CAAAX,OAAA;IACA;EACA;EACAc,OAAA;IACA,MAAAC,YAAA;MACA,UAAAC,KAAA,CAAAC,IAAA,CAAAC,QAAA;MAEA,KAAA1B,OAAA;MACA,KAAAC,KAAA;MACA,KAAAC,OAAA;MAEA;QACA;QACA,UAAAyB,OAAA,CAAAC,OAAA,IAAAC,UAAA,CAAAD,OAAA;;QAEA;QACA,MAAAd,QAAA,GAAAM,IAAA,CAAAC,KAAA,CAAAN,YAAA,CAAAC,OAAA;;QAEA;QACA,MAAAc,WAAA;UACA,GAAAhB,QAAA;UACA,QAAAX;QACA;;QAEA;QACAY,YAAA,CAAAgB,OAAA,SAAAX,IAAA,CAAAY,SAAA,CAAAF,WAAA;;QAEA;QACA,KAAAG,KAAA,CAAAC,KAAA,oBAAAJ,WAAA;QAEA,KAAA5B,OAAA;MACA,SAAAD,KAAA;QACAkC,OAAA,CAAAlC,KAAA,4BAAAA,KAAA;QACA,KAAAA,KAAA;MACA;QACA,KAAAD,OAAA;MACA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}